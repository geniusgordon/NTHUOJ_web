<br>
{% if not is_new %}
<strong>Current Tags</strong>
<table>
  <tbody id="tagTable">
    {% for t in tags %}
<<<<<<< HEAD
      <tr>
        <td><input type="checkbox"></td>
        <td>{{t.tag_name}}</td>
        <td><button class="btn btn-primary">Delete</button></td>
=======
      <tr data-target="{{t.pk}}">
        <td>{{t.tag_name}}</td>
        <td><button class="btn btn-primary del_tag_btn">Delete</button></td>
>>>>>>> bruce3557
      </tr>
    {% endfor %}
  </tbody>
</table>
<br>
<br>
<<<<<<< HEAD
<table>
  <tr>
    <th>Add Tag</th>
    <td>
      <form id="addTag">
        <div class='input-group'>
          {% csrf_token %}
          <input type='text' id='newTag' name='tag' class='form-control' width='25%'>
          <span class='input-group-btn'>
            <button id='add_tag_button' class='btn btn-default'>Add</button>
          </span>
        </div>
      </form>
    </td>
  </tr>
</table>
=======
<form id="addTag">
  <div class='input-group'>
    {% csrf_token %}
    {{ tag_form.tag_name }}
    <span class="input-group-btn">
      <button id='add_tag_button' class='btn btn-default'>Add Tag</button>
    </span>
  </div>
</form>
>>>>>>> bruce3557
<script>
$(document).ready(function() {
    $("#addTag").submit(function(e) {
        e.preventDefault();
<<<<<<< HEAD
        return add_new_tag({{pid}});
    });
});
=======
        var ret = add_new_tag({{ problem.pk }});
        refreshEventListener();
        return ret;
    });
    refreshEventListener();
});
function refreshEventListener() {
    $('body').on('click', '.del_tag_btn', function(e) {
        var row = $(this).parents("tr");
        var tid = $(this).parents("tr").attr('data-target');
        $.ajax({
            type: 'GET',
            url: '/problem/'+{{ problem.pk }}+'/tag/'+tid+'/delete/',
            success: function(data) {
              row.remove();
            }
        });
        return false;
    });
}
>>>>>>> bruce3557
</script>
{% else %}
<strong>Save your problem before editing the tags</strong>
{% endif %}

